<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>CMU15213：CSAPP 实验一：DataLab | SIO__Five</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="计算机基础,整数表示,浮点数表示," />
  

  <meta name="description" content="实验内容《深入理解计算机系统》的第一个实验，内容包括位操作，用二进制表示整数，浮点数，以及相应的操作。实验限定了可选用的操作符，并且有最大次数限制，总体来讲还是非常有趣的。 bitAnd只使用 ~ 和 | 实现 &amp;amp; De Morgan定律 12345678910/*  * bitAnd - x&amp;amp;y using only ~ and |  *   Example: bitAnd(6,">
<meta name="keywords" content="计算机基础,整数表示,浮点数表示">
<meta property="og:type" content="article">
<meta property="og:title" content="CMU15213：CSAPP 实验一：DataLab">
<meta property="og:url" content="http://yoursite.com/2017/10/16/cmu15213-datalab/index.html">
<meta property="og:site_name" content="SIO__Five">
<meta property="og:description" content="实验内容《深入理解计算机系统》的第一个实验，内容包括位操作，用二进制表示整数，浮点数，以及相应的操作。实验限定了可选用的操作符，并且有最大次数限制，总体来讲还是非常有趣的。 bitAnd只使用 ~ 和 | 实现 &amp;amp; De Morgan定律 12345678910/*  * bitAnd - x&amp;amp;y using only ~ and |  *   Example: bitAnd(6,">
<meta property="og:image" content="http://siofive.qiniudn.com/datalab-bitCount.jpg">
<meta property="og:updated_time" content="2017-10-17T11:59:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CMU15213：CSAPP 实验一：DataLab">
<meta name="twitter:description" content="实验内容《深入理解计算机系统》的第一个实验，内容包括位操作，用二进制表示整数，浮点数，以及相应的操作。实验限定了可选用的操作符，并且有最大次数限制，总体来讲还是非常有趣的。 bitAnd只使用 ~ 和 | 实现 &amp;amp; De Morgan定律 12345678910/*  * bitAnd - x&amp;amp;y using only ~ and |  *   Example: bitAnd(6,">
<meta name="twitter:image" content="http://siofive.qiniudn.com/datalab-bitCount.jpg">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/books/"
            rel="noopener noreferrer"
            target="_self"
            >
            书单
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/atom.xml"
            rel="noopener noreferrer"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#实验内容"><span class="toc-text">实验内容</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#bitAnd"><span class="toc-text">bitAnd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#getByte"><span class="toc-text">getByte</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#logicalShift"><span class="toc-text">logicalShift</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bitCount"><span class="toc-text">bitCount</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bang"><span class="toc-text">bang</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tmin"><span class="toc-text">tmin</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fitsBits"><span class="toc-text">fitsBits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#divpwr2"><span class="toc-text">divpwr2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#negate"><span class="toc-text">negate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#isPositive"><span class="toc-text">isPositive</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#isLessOrEqual"><span class="toc-text">isLessOrEqual</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ilog2"><span class="toc-text">ilog2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#float-neg"><span class="toc-text">float_neg</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#float-i2f"><span class="toc-text">float_i2f</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#float-twice"><span class="toc-text">float_twice</span></a></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-cmu15213-datalab" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">CMU15213：CSAPP 实验一：DataLab</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2017.10.16</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>SIO__Five</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/深入理解计算机系统/">深入理解计算机系统</a>
  </span>



      
        <span>
          <i class="icon-comment"></i>
          <a href="http://www.forsigner.com/2017/10/16/cmu15213-datalab/#disqus_thread"></a>
        </span>
      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <h1 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h1><p>《深入理解计算机系统》的第一个实验，内容包括位操作，用二进制表示整数，浮点数，以及相应的操作。实验限定了可选用的操作符，并且有最大次数限制，总体来讲还是非常有趣的。</p>
<h2 id="bitAnd"><a href="#bitAnd" class="headerlink" title="bitAnd"></a>bitAnd</h2><p>只使用 ~ 和 | 实现 &amp;</p>
<p>De Morgan定律</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">/* </div><div class="line"> * <span class="built_in">bitAnd</span> - x&amp;y using only ~ <span class="built_in">and</span> | </div><div class="line"> *   Examp<span class="symbol">le:</span> <span class="built_in">bitAnd</span>(<span class="number">6</span>, <span class="number">5</span>) = <span class="number">4</span></div><div class="line"> *   Legal o<span class="symbol">ps:</span> ~ |</div><div class="line"> *   <span class="built_in">Max</span> o<span class="symbol">ps:</span> <span class="number">8</span></div><div class="line"> *   Rati<span class="symbol">ng:</span> <span class="number">1</span></div><div class="line"> */</div><div class="line"><span class="built_in">int</span> <span class="built_in">bitAnd</span>(<span class="built_in">int</span> x, <span class="built_in">int</span> y) &#123;</div><div class="line">  return ~(~x | ~y);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="getByte"><a href="#getByte" class="headerlink" title="getByte"></a>getByte</h2><p>从一个整数（4字节）中提取第0，1，2，3个字节。每个字节8bits，所以通过右移8*n位，然后取最后8位bits</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/* </div><div class="line"> * getByte - Extract byte <span class="built_in">n</span> from word x</div><div class="line"> *   Bytes numbered from <span class="number">0</span> (LSB) to <span class="number">3</span> (MSB)</div><div class="line"> *   Exampl<span class="symbol">es:</span> getByte(<span class="number">0</span>x12345678,<span class="number">1</span>) = <span class="number">0</span>x56</div><div class="line"> *   Legal o<span class="symbol">ps:</span> ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</div><div class="line"> *   <span class="built_in">Max</span> o<span class="symbol">ps:</span> <span class="number">6</span></div><div class="line"> *   Rati<span class="symbol">ng:</span> <span class="number">2</span></div><div class="line"> */</div><div class="line"><span class="built_in">int</span> getByte(<span class="built_in">int</span> x, <span class="built_in">int</span> <span class="built_in">n</span>) &#123;</div><div class="line">  return x&gt;&gt;(<span class="built_in">n</span>&lt;&lt;<span class="number">3</span>) &amp; <span class="number">0</span>xFF;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="logicalShift"><a href="#logicalShift" class="headerlink" title="logicalShift"></a>logicalShift</h2><p>将一个数逻辑右移，当x为负数时，代码实际上进行的是算术右移，所以要将右移的1改为0</p>
<p>最高位右移之后的位置为：32-n，所以将-1[1..1]左移动31-n位，得到[1..10..0]。取反之后再&amp;算术右移的数即可。</p>
<p>但由于不能使用-，使用-n=~n+1. 32-n= 32+~n+1。并且使得每次移位的范围在[0,31]之间，分成两次移位。</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">/* </div><div class="line"> * logicalShift - shift x to the <span class="built_in">right</span> by <span class="built_in">n</span>, using a logical shift</div><div class="line"> *   Can assume that <span class="number">0</span> &lt;= <span class="built_in">n</span> &lt;= <span class="number">31</span></div><div class="line"> *   Exampl<span class="symbol">es:</span> logicalShift(<span class="number">0</span>x87654321,<span class="number">4</span>) = <span class="number">0</span>x08765432</div><div class="line"> *   Legal o<span class="symbol">ps:</span> ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</div><div class="line"> *   <span class="built_in">Max</span> o<span class="symbol">ps:</span> <span class="number">20</span></div><div class="line"> *   Rati<span class="symbol">ng:</span> <span class="number">3</span> </div><div class="line"> */</div><div class="line"><span class="built_in">int</span> logicalShift(<span class="built_in">int</span> x, <span class="built_in">int</span> <span class="built_in">n</span>) &#123;</div><div class="line">  <span class="built_in">int</span> tmp = (~<span class="number">0</span>)&lt;&lt;(<span class="number">32</span> + (~<span class="built_in">n</span>));</div><div class="line">  tmp = tmp &lt;&lt; <span class="number">1</span>;</div><div class="line">  return x&gt;&gt;<span class="built_in">n</span> &amp; (~tmp);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="bitCount"><a href="#bitCount" class="headerlink" title="bitCount"></a>bitCount</h2><p>计算二进制中bit为1的个数，由于不能使用循环等操作，这道题难度很大。可以采用一种分治的思想解决。</p>
<p><img src="http://siofive.qiniudn.com/datalab-bitCount.jpg" alt=""></p>
<p>为了能够将对应位上的数字相加，需要产生5个mask，分别是0x55555555, 0x33333333, 0x0f0f0f0f, 0x00ff00ff, 0x0000ffff。 分别代表了[1,2,4,8,16]个0和1间隔。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * bitCount - returns count of number of 1's in word</span></div><div class="line"><span class="comment"> *   Examples: bitCount(5) = 2, bitCount(7) = 3</span></div><div class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></div><div class="line"><span class="comment"> *   Max ops: 40</span></div><div class="line"><span class="comment"> *   Rating: 4</span></div><div class="line"><span class="comment"> */</span></div><div class="line">int bitCount(int x) &#123;</div><div class="line">  int _mask1 = <span class="number">0x55</span> | (<span class="number">0x55</span> &lt;&lt; <span class="number">8</span>);   <span class="comment">//  0x5555</span></div><div class="line">  int _mask2 = <span class="number">0x33</span> | (<span class="number">0x33</span> &lt;&lt; <span class="number">8</span>);   <span class="comment">//  0x3333</span></div><div class="line">  int _mask3 = <span class="number">0x0f</span> | (<span class="number">0x0f</span> &lt;&lt; <span class="number">8</span>);   <span class="comment">//  0x0f0f</span></div><div class="line"></div><div class="line">  int mask1 = _mask1 | (_mask1 &lt;&lt; <span class="number">16</span>);  <span class="comment">//  0x55555555 = [0101...0101]</span></div><div class="line">  int mask2 = _mask2 | (_mask2 &lt;&lt; <span class="number">16</span>);  <span class="comment">//  0x33333333 = [0011...0011]</span></div><div class="line">  int mask3 = _mask3 | (_mask3 &lt;&lt; <span class="number">16</span>);  <span class="comment">//  0x0f0f0f0f = [00001111...00001111]</span></div><div class="line">  int mask4 = <span class="number">0xff</span> | (<span class="number">0xff</span> &lt;&lt; <span class="number">16</span>);      <span class="comment">//  0x00ff00ff = [00000000111111110000000011111111]</span></div><div class="line">  int mask5 = <span class="number">0xff</span> | (<span class="number">0xff</span> &lt;&lt; <span class="number">8</span>);       <span class="comment">//  0x0000ffff = [00000000000000001111111111111111]</span></div><div class="line">  </div><div class="line">  x = (x &amp; mask1) + ((x &gt;&gt; <span class="number">1</span>) &amp; mask1);</div><div class="line">  x = (x &amp; mask2) + ((x &gt;&gt; <span class="number">2</span>) &amp; mask2);</div><div class="line">  x = (x &amp; mask3) + ((x &gt;&gt; <span class="number">4</span>) &amp; mask3);</div><div class="line">  x = (x &amp; mask4) + ((x &gt;&gt; <span class="number">8</span>) &amp; mask4);</div><div class="line">  x = (x &amp; mask5) + ((x &gt;&gt; <span class="number">16</span>) &amp; mask5);</div><div class="line">  return x;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="bang"><a href="#bang" class="headerlink" title="bang"></a>bang</h2><p>计算!x，但不能使用！</p>
<p>只用当x为0时，!x=1, 观察得到只有0和-0的最高位都不为1，其它的都至少有一个1（tmin有两个，-tmin=tmin）。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* </span></div><div class="line"><span class="comment"> * bang - Compute !x without using !</span></div><div class="line"><span class="comment"> *   Examples: bang(3) = 0, bang(0) = 1</span></div><div class="line"><span class="comment"> *   Legal ops: ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></div><div class="line"><span class="comment"> *   Max ops: 12</span></div><div class="line"><span class="comment"> *   Rating: 4 </span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bang</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> ((~(x|(~x+<span class="number">1</span>)))&gt;&gt;<span class="number">31</span>) &amp; <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="tmin"><a href="#tmin" class="headerlink" title="tmin"></a>tmin</h2><p>计算tmin，直接1&lt;&lt;31即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* </span></div><div class="line"><span class="comment"> * tmin - return minimum two's complement integer </span></div><div class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></div><div class="line"><span class="comment"> *   Max ops: 4</span></div><div class="line"><span class="comment"> *   Rating: 1</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">tmin</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="number">1</span>&lt;&lt;<span class="number">31</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="fitsBits"><a href="#fitsBits" class="headerlink" title="fitsBits"></a>fitsBits</h2><p>这题关键点是理解题意。如果x能够被表示成n-bit的补码，则返回1. 其实问的是，用一个长度为n-bit的二进制表示补码，对应范围为[n-tmin, n-tmax]，问x是否在该范围内。</p>
<p>观察n-bit能够表示的范围，如果将这个数右移n-1位，如果x为正，此时x全为0，如果x为负，那么x全为1（为-1）。再将x+1之后再右移1位，此时x应该全为0.</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">/* </div><div class="line"> * fitsBits - return <span class="number">1</span> <span class="built_in">if</span> x can be represented as an </div><div class="line"> *  <span class="built_in">n</span>-bit, two's complement integer.</div><div class="line"> *   <span class="number">1</span> &lt;= <span class="built_in">n</span> &lt;= <span class="number">32</span></div><div class="line"> *   Exampl<span class="symbol">es:</span> fitsBits(<span class="number">5</span>,<span class="number">3</span>) = <span class="number">0</span>, fitsBits(-<span class="number">4</span>,<span class="number">3</span>) = <span class="number">1</span></div><div class="line"> *   Legal o<span class="symbol">ps:</span> ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</div><div class="line"> *   <span class="built_in">Max</span> o<span class="symbol">ps:</span> <span class="number">15</span></div><div class="line"> *   Rati<span class="symbol">ng:</span> <span class="number">2</span></div><div class="line"> */</div><div class="line"><span class="built_in">int</span> fitsBits(<span class="built_in">int</span> x, <span class="built_in">int</span> <span class="built_in">n</span>) &#123;</div><div class="line">  x = (x&gt;&gt;(<span class="built_in">n</span> + ~<span class="number">0</span>)) + <span class="number">1</span>;</div><div class="line">  return !(x&gt;&gt;<span class="number">1</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="divpwr2"><a href="#divpwr2" class="headerlink" title="divpwr2"></a>divpwr2</h2><p>计算x/(2^n), 并且向零取整</p>
<ul>
<li>当x为整数的时候，直接右移n为即可。</li>
<li>当x为负数的时候，由于要向上取整，所以需要加上偏移量。ans = (x+(1&lt;<k)-1)>&gt;k</k)-1)></li>
</ul>
<p>所以这道题的关键是先判断是否为负数，若是，加上对应的偏移量。</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/* </div><div class="line"> * divpwr2 - Compute x/(<span class="number">2</span>^<span class="built_in">n</span>), for <span class="number">0</span> &lt;= <span class="built_in">n</span> &lt;= <span class="number">30</span></div><div class="line"> *  <span class="built_in">Round</span> toward zero</div><div class="line"> *   Exampl<span class="symbol">es:</span> divpwr2(<span class="number">15</span>,<span class="number">1</span>) = <span class="number">7</span>, divpwr2(-<span class="number">33</span>,<span class="number">4</span>) = -<span class="number">2</span></div><div class="line"> *   Legal o<span class="symbol">ps:</span> ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</div><div class="line"> *   <span class="built_in">Max</span> o<span class="symbol">ps:</span> <span class="number">15</span></div><div class="line"> *   Rati<span class="symbol">ng:</span> <span class="number">2</span></div><div class="line"> */</div><div class="line"><span class="built_in">int</span> divpwr2(<span class="built_in">int</span> x, <span class="built_in">int</span> <span class="built_in">n</span>) &#123;</div><div class="line">    <span class="built_in">int</span> s = (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">1</span>;</div><div class="line">    return (x + (s&lt;&lt;<span class="built_in">n</span>) + ~s + <span class="number">1</span>) &gt;&gt; <span class="built_in">n</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="negate"><a href="#negate" class="headerlink" title="negate"></a>negate</h2><p>计算-x。-x=~x+1</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* </span></div><div class="line"><span class="comment"> * negate - return -x </span></div><div class="line"><span class="comment"> *   Example: negate(1) = -1.</span></div><div class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></div><div class="line"><span class="comment"> *   Max ops: 5</span></div><div class="line"><span class="comment"> *   Rating: 2</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">negate</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> ~x + <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="isPositive"><a href="#isPositive" class="headerlink" title="isPositive"></a>isPositive</h2><p>如果x&gt;0, 返回1。否则返回0</p>
<p>这道题咋一看很简单，只需要判断最高位。但是0并不是一个正数，所以需要特殊处理。</p>
<ul>
<li>x为0，!x=1, ~x的最高位为1，相减得0</li>
<li>x为整数，!x=0, ~x的最高位为1，相减得1</li>
<li>x为负数，!x=0, ~x的最高位为0，相减得0</li>
</ul>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/* </div><div class="line"> * isPositive - <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> x &gt; <span class="number">0</span>, <span class="keyword">return</span> <span class="number">0</span> otherwise </div><div class="line"> *   <span class="type">Example</span>: isPositive(-<span class="number">1</span>) = <span class="number">0</span>.</div><div class="line"> *   <span class="type">Legal</span> ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</div><div class="line"> *   <span class="type">Max</span> ops: <span class="number">8</span></div><div class="line"> *   <span class="type">Rating</span>: <span class="number">3</span></div><div class="line"> */</div><div class="line"><span class="built_in">int</span> isPositive(<span class="built_in">int</span> x) &#123;</div><div class="line">  <span class="built_in">int</span> z = !x;</div><div class="line">  <span class="keyword">return</span> (((~x)&gt;&gt;<span class="number">31</span>) &amp; <span class="number">1</span>) + (~z + <span class="number">1</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="isLessOrEqual"><a href="#isLessOrEqual" class="headerlink" title="isLessOrEqual"></a>isLessOrEqual</h2><p>判断 x&lt;=y<br>如果直接用y-x，会溢出。所以这题需要先判断x和y的两者符号是否相同。不同的情况很好处理，如果相同，两者相减并不会发生溢出，再判断即可。</p>
<p>如果两者相同，x-y&lt;=0, x-y-1&lt;=-1, 即x+~y+1-1&lt;=-1。</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">/* </div><div class="line"> * isLessOrEqual - <span class="keyword">if</span> x &lt;= y  then <span class="keyword">return</span> <span class="number">1</span>, <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span> </div><div class="line"> *   <span class="type">Example</span>: isLessOrEqual(<span class="number">4</span>,<span class="number">5</span>) = <span class="number">1</span>.</div><div class="line"> *   <span class="type">Legal</span> ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</div><div class="line"> *   <span class="type">Max</span> ops: <span class="number">24</span></div><div class="line"> *   <span class="type">Rating</span>: <span class="number">3</span></div><div class="line"> */</div><div class="line"><span class="built_in">int</span> isLessOrEqual(<span class="built_in">int</span> x, <span class="built_in">int</span> y) &#123;</div><div class="line">  <span class="built_in">int</span> sx = (x&gt;&gt;<span class="number">31</span>) &amp; <span class="number">1</span>;</div><div class="line">  <span class="built_in">int</span> sy = (y&gt;&gt;<span class="number">31</span>) &amp; <span class="number">1</span>;</div><div class="line">  <span class="built_in">int</span> sign_diff = sx &amp; !sy;</div><div class="line">  <span class="built_in">int</span> sign_same = !(sx^sy) &amp; (((x+~y)&gt;&gt;<span class="number">31</span>) &amp; <span class="number">1</span>);</div><div class="line">  <span class="keyword">return</span> sign_diff | sign_same;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ilog2"><a href="#ilog2" class="headerlink" title="ilog2"></a>ilog2</h2><p>ilog2(16)=4</p>
<p>本质上就是求x的最高位1的位置，可以使用上面bitCount中分治法的思想。ilog2(x)的最大值为31，可以表示为 ilog2(x) = 16a+8b+4c+2d+1e。其中a,b,c,d,e为0或1。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * ilog2 - return floor(log base 2 of x), where x &gt; 0</span></div><div class="line"><span class="comment"> *   Example: ilog2(16) = 4</span></div><div class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></div><div class="line"><span class="comment"> *   Max ops: 90</span></div><div class="line"><span class="comment"> *   Rating: 4</span></div><div class="line"><span class="comment"> */</span></div><div class="line">int ilog2(int x) &#123;</div><div class="line">  <span class="comment">// max(x) = 31</span></div><div class="line">  <span class="comment">// x can be replace by : x = 16*a+8*b+4*c+2*d+1*e</span></div><div class="line">  int ans = <span class="number">0</span>;</div><div class="line">  ans += (!!(x&gt;&gt;<span class="number">16</span>)) &lt;&lt; <span class="number">4</span>;</div><div class="line">  ans += (!!(x&gt;&gt;(<span class="number">8</span>+ans))) &lt;&lt; <span class="number">3</span>;</div><div class="line">  ans += (!!(x&gt;&gt;(<span class="number">4</span>+ans))) &lt;&lt; <span class="number">2</span>;</div><div class="line">  ans += (!!(x&gt;&gt;(<span class="number">2</span>+ans))) &lt;&lt; <span class="number">1</span>;</div><div class="line">  ans += (!!(x&gt;&gt;(<span class="number">1</span>+ans))) &lt;&lt; <span class="number">0</span>;</div><div class="line">  return ans;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="float-neg"><a href="#float-neg" class="headerlink" title="float_neg"></a>float_neg</h2><p>用unsigned x表示float，并返回-x</p>
<p>先判断uf是否为NaN，如果是，返回NaN，如果不是的话，返回-uf即可。当浮点数中阶数全为1，而尾数不为0时，表示该数为NaN。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">/* </div><div class="line"> * float_neg - Return bit-level equivalent <span class="keyword">of</span> expression -f <span class="keyword">for</span></div><div class="line"> *   floating point argument f.</div><div class="line"> *   Both <span class="keyword">the</span> argument <span class="keyword">and</span> <span class="literal">result</span> are passed <span class="keyword">as</span> unsigned int's, <span class="keyword">but</span></div><div class="line"> *   they are <span class="keyword">to</span> be interpreted <span class="keyword">as</span> <span class="keyword">the</span> bit-level representations <span class="keyword">of</span></div><div class="line"> *   single-precision floating point values.</div><div class="line"> *   When argument <span class="keyword">is</span> NaN, <span class="literal">return</span> argument.</div><div class="line"> *   Legal ops: Any <span class="built_in">integer</span>/unsigned operations incl. ||, &amp;&amp;. also <span class="keyword">if</span>, <span class="keyword">while</span></div><div class="line"> *   Max ops: <span class="number">10</span></div><div class="line"> *   Rating: <span class="number">2</span></div><div class="line"> */</div><div class="line">unsigned float_neg(unsigned uf) &#123;</div><div class="line">  unsigned t = uf &amp; <span class="number">0x7fffffff</span>;</div><div class="line">  <span class="keyword">if</span> (t &gt; <span class="number">0x7f800000</span>) <span class="literal">return</span> uf;</div><div class="line"><span class="built_in">  return</span> uf ^ <span class="number">0x80000000</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="float-i2f"><a href="#float-i2f" class="headerlink" title="float_i2f"></a>float_i2f</h2><p>将一个int数转化为float</p>
<p>x=(s&lt;&lt;31) | (exponent&lt;&lt;23) | fraction</p>
<p>先得到符号位，然后如果x=0，或者x=-tmin，直接返回相应的float。如果x为负数，转化为整数考虑。再分别计算该数的exponent和fraction，在计算fraction的时候需要注意向偶数进位，并且进位之后exponent是否需要改变。具体的细节见代码注释</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* </span></div><div class="line"><span class="comment"> * float_i2f - Return bit-level equivalent of expression (float) x</span></div><div class="line"><span class="comment"> *   Result is returned as unsigned int, but</span></div><div class="line"><span class="comment"> *   it is to be interpreted as the bit-level representation of a</span></div><div class="line"><span class="comment"> *   single-precision floating point values.</span></div><div class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></div><div class="line"><span class="comment"> *   Max ops: 30</span></div><div class="line"><span class="comment"> *   Rating: 4</span></div><div class="line"><span class="comment"> */</span></div><div class="line">unsigned float_i2f(int x) &#123;</div><div class="line">  <span class="comment">// return (s&lt;&lt;31)|(exponent&lt;&lt;23)|fraction</span></div><div class="line">  int s = (x&gt;&gt;<span class="number">31</span>) &amp; <span class="number">1</span>;  <span class="comment">//sign</span></div><div class="line">  int exponent;</div><div class="line">  int fraction = <span class="number">0</span>;</div><div class="line">  int fraction_mask;</div><div class="line">  int delta;</div><div class="line">  int i = <span class="number">30</span>;</div><div class="line">  if (x == <span class="number">0</span>) return x;   <span class="comment">//x=0</span></div><div class="line">  else if (x == <span class="number">0x80000000</span>) &#123; <span class="comment">//x=-tmin, exponent = 31 + 127</span></div><div class="line">    exponent = <span class="number">158</span>;</div><div class="line">  &#125; else &#123;</div><div class="line">    if (s) x = -x;  <span class="comment">//if x is negative, change to positive</span></div><div class="line">    while(!(x&gt;&gt;i)) i--; <span class="comment">//right shift until x=0</span></div><div class="line">    exponent = i + <span class="number">127</span>;</div><div class="line">    x = x &lt;&lt; (<span class="number">31</span> - i);  <span class="comment">//clean zeros in higher bits</span></div><div class="line">    fraction_mask = <span class="number">0x7fffff</span>;</div><div class="line">    fraction = fraction_mask &amp; (x &gt;&gt; <span class="number">8</span>); <span class="comment">//get fraction</span></div><div class="line">    x = x &amp; <span class="number">0xff</span>; <span class="comment">//the lower 8 bits will be truncated</span></div><div class="line">    delta = (x &gt; <span class="number">128</span>) || ((x == <span class="number">128</span>) &amp;&amp; (fraction &amp; <span class="number">1</span>)); <span class="comment">//if x&gt;=odd.5, delta = 1</span></div><div class="line">    fraction += delta;</div><div class="line">    if (fraction &gt;&gt; <span class="number">23</span>) &#123; <span class="comment">//if fraction is larger than 23 bits</span></div><div class="line">      exponent += <span class="number">1</span>;</div><div class="line">      fraction &amp;= fraction_mask;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  return (s&lt;&lt;<span class="number">31</span>) | (exponent&lt;&lt;<span class="number">23</span>) | fraction;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="float-twice"><a href="#float-twice" class="headerlink" title="float_twice"></a>float_twice</h2><p>将给定的unsigned uf表示的float * 2</p>
<p>如果uf是denormalized，uf的二进制左移1就是该数乘2。如果uf <em> 2还是denormalized，好理解。如果uf </em> 2变成了normalized，阶码变为1，尾数变为0.也成立。</p>
<p>如果uf是normalized，直接将uf的阶码+1，但如果uf的阶码+1之后全为1，就变成了inf，需要将尾数全部置为0.</p>
<p>如果uf是NaN或者inf，直接返回uf。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* </span></div><div class="line"><span class="comment"> * float_twice - Return bit-level equivalent of expression 2*f for</span></div><div class="line"><span class="comment"> *   floating point argument f.</span></div><div class="line"><span class="comment"> *   Both the argument and result are passed as unsigned int's, but</span></div><div class="line"><span class="comment"> *   they are to be interpreted as the bit-level representation of</span></div><div class="line"><span class="comment"> *   single-precision floating point values.</span></div><div class="line"><span class="comment"> *   When argument is NaN, return argument</span></div><div class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></div><div class="line"><span class="comment"> *   Max ops: 30</span></div><div class="line"><span class="comment"> *   Rating: 4</span></div><div class="line"><span class="comment"> */</span></div><div class="line">unsigned float_twice(unsigned uf) &#123;</div><div class="line">  <span class="keyword">if</span> ((uf &amp; <span class="number">0x7f</span>800000) == <span class="number">0</span>) &#123; <span class="comment">//denormalized</span></div><div class="line">    <span class="keyword">return</span> (uf &amp; <span class="number">0x80000000</span>) | (uf &lt;&lt; <span class="number">1</span>);</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((uf &amp; <span class="number">0x7f</span>800000) != <span class="number">0x7f</span>800000) &#123;  <span class="comment">//normalized</span></div><div class="line">    uf += (<span class="number">1</span> &lt;&lt; <span class="number">23</span>);</div><div class="line">    <span class="keyword">if</span> ((uf &amp; <span class="number">0x7f</span>800000) == <span class="number">0x7f</span>800000) uf = uf &gt;&gt; <span class="number">23</span> &lt;&lt; <span class="number">23</span>;</div><div class="line">    <span class="keyword">return</span> uf;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">return</span> uf;   <span class="comment">// NaN or inf </span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>整个实验内容让我更深入的理解计算机如何用二进制表示整数和浮点数，收获很大。可以配套CMU的网上课程学习该书，效果会更好。</p>

    
  </div>
</article>


   

   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2015/11/04/HDU5157/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2017/11/01/dlsym调用动态链接库/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/books/"
              rel="noopener noreferrer"
              target="_self"
              >
              书单
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/atom.xml"
              rel="noopener noreferrer"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'SIO__Five';
    
    var disqus_url = 'http://yoursite.com/2017/10/16/cmu15213-datalab/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//SIO__Five.disqus.com/count.js" async></script>



    




    

    
	
  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
